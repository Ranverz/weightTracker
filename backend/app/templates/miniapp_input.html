{% extends "layout.html" %}
{% block content %}

<h2 class="section-title">{{ exercise.name }}</h2>

<form method="POST" action="/miniapp/save">
    <input type="hidden" name="exercise_id" value="{{ exercise.id }}">

    <label class="label">Вес</label>
    <input class="input" type="number" name="weight" step="0.5" min="0" required>

    <label class="label">Единица веса</label>
    <select class="select" name="weight_unit">
        <option value="kg" {% if exercise.default_unit == "kg" %}selected{% endif %}>кг</option>
        <option value="plates" {% if exercise.default_unit == "plates" %}selected{% endif %}>плиты</option>
    </select>

    <label class="label">Повторы</label>
    <input class="input" type="number" name="reps" required>

    <label class="label">Подходы</label>
    <input class="input" type="number" name="sets" required>

    <button class="btn">Сохранить</button>
</form>

{% if history|length > 0 %}
    <h3 class="section-title">История</h3>
    <div class="history">
        {% for row in history %}
            <div class="history-item">
                <div class="history-date">{{ row.created_at.strftime("%d.%m.%Y") }}</div>
                <div class="history-stats">{{ row.weight }} {{ "кг" if row.weight_unit == "kg" else "плиты" }} · {{ row.reps }} повт · {{ row.sets }} подх</div>
            </div>
        {% endfor %}
    </div>
{% endif %}

<a class="btn-secondary" href="/miniapp/day/{{ exercise.day }}">Назад</a>

{% endblock %}
